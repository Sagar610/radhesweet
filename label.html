<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Radhe Sweets - Professional Label Generator</title>
  
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      gap: 20px;
      margin: 20px;
      background-color: #f5f5f5;
    }

    /* Form Styling */
    .form {
      width: 600px;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      max-height: 95vh;
      overflow-y: auto;
    }
    
    .form h2 {
      color: #d4af37;
      text-align: center;
      margin-bottom: 25px;
      font-size: 24px;
    }
    
    .form label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #333;
      font-size: 14px;
    }
    
    .form input, .form textarea, .form select {
      width: 100%;
      margin-bottom: 18px;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      box-sizing: border-box;
      font-size: 14px;
      transition: all 0.3s;
    }
    
    .form input:focus, .form textarea:focus, .form select:focus {
      outline: none;
      border-color: #d4af37;
      box-shadow: 0 0 8px rgba(212,175,55,0.3);
    }
    
    .form button {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #d4af37, #b8941f);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
    }
    
    .form button:hover {
      background: linear-gradient(135deg, #b8941f, #9a7a1a);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(212,175,55,0.4);
    }

    /* Row layout for side-by-side fields */
    .form .row {
      display: flex;
      gap: 15px;
      margin-bottom: 18px;
    }
    
    .form .field-group {
      flex: 1;
    }
    
    .form .field-group label {
      margin-bottom: 8px;
    }
    
    .form .field-group input, .form .field-group select, .form .field-group textarea {
      margin-bottom: 0;
    }
    
    /* Special styling for 3-column layout */
    .form .row:has(.field-group:nth-child(3)) {
      gap: 12px;
    }
    
    .form .row:has(.field-group:nth-child(3)) .field-group {
      flex: 1;
      min-width: 0;
    }

    /* Label container - Auto-sizing layout */
    .label {
      border: 2px solid #333;
      border-radius: 8px;
      box-sizing: border-box;
      background: #fbefd6;
      padding: 8px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      position: relative;
      overflow: visible;
    }

    /* Label sizes - Fixed dimensions for GK420d (1:1 scale) */
    .label.size-small {
      width: 50.8mm;
      height: 50.8mm;
      font-size: 7pt;
      padding: 6px;
      transform: scale(1);
      transform-origin: top left;
    }
    
    .label.size-medium {
      width: 50.8mm;
      height: 76.2mm;
      font-size: 8pt;
      padding: 8px;
      transform: scale(1);
      transform-origin: top left;
    }
    
    .label.size-large {
      width: 50.8mm;
      height: 101.6mm;
      font-size: 9pt;
      padding: 10px;
      transform: scale(1);
      transform-origin: top left;
    }
    
    /* Horizontal Content Label - Wide layout for more content */
    .label.size-horizontal {
      width: 76.2mm;
      height: 50.8mm;
      font-size: 8pt;
      padding: 8px;
      transform: scale(1);
      transform-origin: top left;
    }

    /* Top Logo - Fixed sizing */
    .label .logo {
      text-align: center;
      margin-bottom: 4px;
      flex-shrink: 0;
    }
    .label .logo img {
      max-height: 25px;
      max-width: 80%;
      object-fit: contain;
    }

    /* Main Content Container - One continuous white box with auto-sizing */
    .label .main-content {
      background: white;
      padding: 4px;
      border-radius: 6px;
      border: 1px solid #e0e0e0;
      margin: 2px 0;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
      overflow: visible;
      min-height: 0;
    }
    
    /* Horizontal Content Layout - Keep vertical flow, just wider */
    .label.size-horizontal .main-content {
      flex-direction: column;
      gap: 4px;
    }

    /* Product name - Auto-sizing */
    .label .product {
      text-align: center;
      font-weight: bold;
      color: #333;
      line-height: 1.0;
      flex-shrink: 0;
      padding: 1px 0;
    }
    
    .label.size-small .product { 
      font-size: 9pt; 
    }
    .label.size-medium .product { 
      font-size: 11pt; 
    }
    .label.size-large .product { 
      font-size: 13pt; 
    }
    
    .label.size-horizontal .product { 
      font-size: 12pt; 
    }

    /* Ingredients & allergen - Auto-sizing content area */
    .label .content {
      line-height: 1.1;
      color: #555;
      flex: 1;
      overflow: hidden;
      word-wrap: break-word;
      padding: 2px 0;
      min-height: 0;
      max-height: none;
    }
    
    /* Allergen advice - Smaller font for better fit */
    .label .content span[id="allergen"] {
      font-size: 0.75em;
      line-height: 0.9;
    }
    
    /* Horizontal label content - Better use of extra width */
    .label.size-horizontal .content {
      line-height: 1.1;
      padding: 4px 0;
      min-height: 25px;
      max-height: none;
    }
    
    /* Auto-sizing for all content sections */
    .label .content,
    .label .additional-info,
    .label .weight-price {
      transition: all 0.2s ease;
    }
    
    /* Better spacing for content */
    .label .main-content > * {
      margin-bottom: 1px;
    }
    
    .label .main-content > *:last-child {
      margin-bottom: 0;
    }
    .label .content b {
      font-weight: bold;
      color: #333;
    }

    /* Weight and Price Display - Auto-sizing */
    .label .weight-price {
      text-align: center;
      font-weight: bold;
      color: #000;
      min-height: 12px;
      display: flex;
      justify-content: center;
      gap: 4px;
      flex-wrap: wrap;
      flex-shrink: 0;
      padding: 1px 0;
    }
    
    .label .weight-price span {
      background: white;
      padding: 1px 4px;
      border-radius: 3px;
      font-size: 7pt;
      white-space: nowrap;
    }

    /* Additional Info - Auto-sizing */
    .label .additional-info {
      text-align: center;
      color: #666;
      line-height: 1.0;
      flex-shrink: 0;
      padding: 1px 0;
    }
    
    /* Best Before date - Bold and black for emphasis */
    .label .additional-info div[id="bestBeforeDisplay"] {
      font-weight: bold;
      color: #000;
    }
    
    .label.size-small .additional-info { font-size: 5pt; }
    .label.size-medium .additional-info { font-size: 6pt; }
    .label.size-large .additional-info { font-size: 7pt; }
    .label.size-horizontal .additional-info { font-size: 7pt; }
    
    /* Weight and Price font sizes for different label sizes */
    .label.size-small .weight-price span { font-size: 6pt; }
    .label.size-medium .weight-price span { font-size: 7pt; }
    .label.size-large .weight-price span { font-size: 8pt; }
    .label.size-horizontal .weight-price span { font-size: 7pt; }

    

    /* Footer - Fixed sizing */
    .label .footer {
      text-align: center;
      margin-top: 4px;
      color: #666;
      line-height: 1.1;
      flex-shrink: 0;
    }
    
    .label.size-small .footer { font-size: 6pt; }
    .label.size-medium .footer { font-size: 7pt; }
    .label.size-large .footer { font-size: 8pt; }
    
    .label .footer a {
      color: #d4af37;
      text-decoration: none;
      font-weight: bold;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      body {
        flex-direction: column;
        margin: 10px;
      }
      .form {
        width: 100%;
        margin-bottom: 20px;
      }
      .label {
        width: 100%;
        height: auto;
        min-height: 100mm;
      }
    }

    @media print {
      body { 
        margin: 0; 
        background: white;
      }
      .form { display: none; }
      .label {
        border: none;
        box-shadow: none;
        page-break-after: always;
        overflow: visible;
      }
    }

    @page {
      margin: 0;
    }

    /* Size selector styling */
    .size-selector {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      border: 2px solid #e9ecef;
    }
    
    .size-selector label {
      margin-bottom: 10px;
      color: #495057;
      font-size: 16px;
    }
    
    .size-selector select {
      font-size: 16px;
      font-weight: bold;
    }

         /* Search bar styling */
     .search-container {
       position: absolute;
       top: 20px;
       right: 20px;
       width: 300px;
       z-index: 1000;
     }
     
     .search-input {
       width: 100%;
       padding: 12px 16px;
       border: 2px solid #d4af37;
       border-radius: 25px;
       font-size: 14px;
       background: white;
       box-shadow: 0 2px 10px rgba(0,0,0,0.1);
       transition: all 0.3s;
     }
     
     .search-input:focus {
       outline: none;
       border-color: #b8941f;
       box-shadow: 0 4px 15px rgba(212,175,55,0.3);
     }
     
     .search-results {
       position: absolute;
       top: 100%;
       left: 0;
       right: 0;
       background: white;
       border: 2px solid #d4af37;
       border-radius: 8px;
       max-height: 300px;
       overflow-y: auto;
       box-shadow: 0 4px 20px rgba(0,0,0,0.15);
       display: none;
     }
     
     .search-result-item {
       padding: 12px 16px;
       border-bottom: 1px solid #f0f0f0;
       cursor: pointer;
       transition: background 0.2s;
     }
     
     .search-result-item:hover {
       background: #f8f9fa;
     }
     
     .search-result-item:last-child {
       border-bottom: none;
     }
     
     .sweet-name {
       font-weight: bold;
       color: #333;
       margin-bottom: 4px;
     }
     
     .sweet-ingredients {
       font-size: 12px;
       color: #666;
       line-height: 1.3;
     }
     
     /* Professional features section */
     .features-section {
       background: #e8f4fd;
       padding: 15px;
       border-radius: 8px;
       margin-bottom: 20px;
       border-left: 4px solid #007bff;
     }
     
     .features-section h3 {
       margin: 0 0 10px 0;
       color: #0056b3;
       font-size: 16px;
     }
     
     .features-section p {
       margin: 0;
       color: #495057;
       font-size: 13px;
       line-height: 1.4;
     }

    /* Label preview container */
    .label-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }
    
    /* Ensure 1:1 scale for accurate sizing */
    .label {
      /* Force exact dimensions */
      box-sizing: border-box;
      /* Ensure no browser scaling */
      -webkit-text-size-adjust: none;
      -moz-text-size-adjust: none;
      -ms-text-size-adjust: none;
      text-size-adjust: none;
      /* Prevent any zoom effects */
      zoom: 1;
    }


  </style>
</head>
  <body>
    <!-- Search Bar -->
    <div class="search-container">
      <input type="text" class="search-input" id="searchInput" placeholder="🔍 Search for Gujarati sweets & farsan...">
      <div class="search-results" id="searchResults"></div>
    </div>
    
    <!-- Input Form -->
    <div class="form">
    <h2>🎯 Radhe Sweets Label Generator</h2>
    
              <div class="size-selector">
       <label>📏 Label Size (GK420d Optimized):</label>
       <select id="sizeSelector">
         <option value="small">Small (2" x 2") - Compact</option>
         <option value="medium" selected>Medium (2" x 3") - Standard</option>
         <option value="large">Large (2" x 4") - Detailed</option>
         <option value="horizontal">Horizontal Content (3" x 2") - Wide Layout</option>
       </select>
     </div>


    <div class="row">
      <div class="field-group">
        <label>🏷️ Product Name:</label>
        <input type="text" id="nameInput" value="BUNDI" placeholder="Enter product name">
      </div>
      <div class="field-group">
        <label>🥜 Ingredients:</label>
        <textarea id="ingredientsInput" rows="3" placeholder="List all ingredients">Sugar, Gram Flour, <b>Almond</b> Flakes, Sunflower Oil, Lemon Juice, Cardamom</textarea>
      </div>
    </div>

    <label>⚠️ Allergen Advice:</label>
    <textarea id="allergenInput" rows="4" placeholder="Allergen information">Produced in a facility that handles NUTS, SESAME, SOYA, DAIRY, MUSTARD, CEREALS including GLUTEN, SULPHITES, PEANUTS and CELERY. For allergens, please see ingredients in <b>bold</b>.</textarea>

    <div class="row">
      <div class="field-group">
        <label>⚖️ Weight:</label>
        <input type="text" id="weightInput" placeholder="100gm">
      </div>
      <div class="field-group">
        <label>💰 Price:</label>
        <input type="text" id="priceInput" placeholder="2.99">
      </div>
      <div class="field-group">
        <label>📅 Best Before:</label>
        <div style="display: flex; gap: 8px; align-items: center;">
          <input type="number" id="daysInput" placeholder="5" min="1" max="365" style="width: 60px; margin-bottom: 0;">
          <span style="font-size: 12px; color: #666;">days</span>
        </div>
      </div>
    </div>

    <button onclick="generateAndPrint()">🖨️ Generate & Print Label</button>
  </div>

     <!-- Label Preview Container -->
   <div class="label-container">
     <!-- Label Preview -->
     <div class="label size-medium" id="label">
       <div class="logo"><img id="logo" src="logo.png" alt="Radhe Sweets Logo"></div>
       <div class="main-content">
         <div class="product" id="product">BUNDI</div>
         <div class="content">
           <b>Ingredients:</b> <span id="ingredients">Sugar, Gram Flour, <b>Almond</b> Flakes, Sunflower Oil, Lemon Juice, Cardamom</span>
           <br><br>
           <span id="allergen">Produced in a facility that handles NUTS, SESAME, SOYA, DAIRY, MUSTARD, CEREALS including GLUTEN, SULPHITES, PEANUTS and CELERY. For allergens, please see ingredients in <b>bold</b>.</span>
         </div>
         <div class="weight-price">
          <span id="priceDisplay"></span>
           <span id="weightDisplay"></span>
          
         </div>
                   <div class="additional-info">
            <div id="bestBeforeDisplay"></div>
          </div>
       </div>
       <div class="footer">
         <div id="address">245 Kenton Lane, Harrow HA3 8RP</div>
         <a href="https://radhesweets.co.uk" id="website">https://radhesweets.co.uk</a> |
         <span id="email">info@radhesweets.co.uk</span>
       </div>
     </div>

     
   </div>

     <script>
     // Predefined Gujarati sweets and farsan database
     const gujaratiSweets = [
  { name: "બૂંદી (Bundi)", ingredients: "Gram flour, Sugar, Ghee, Cardamom, Saffron, Almonds" },
  { name: "જલેબી (Jalebi)", ingredients: "Refined flour, Sugar, Ghee, Saffron, Cardamom" },
  { name: "ગુલાબ જામુન (Gulab Jamun)", ingredients: "Khoya, Refined flour, Sugar, Ghee, Cardamom, Saffron" },
  { name: "રસગુલ્લા (Rasgulla)", ingredients: "Chhena, Sugar, Cardamom, Saffron" },
  { name: "બરફી (Barfi)", ingredients: "Khoya, Sugar, Ghee, Saffron, Almonds" },
  { name: "પેડા (Peda)", ingredients: "Khoya, Sugar, Ghee, Cardamom, Saffron" },
  { name: "લાડુ (Ladoo)", ingredients: "Gram flour, Sugar, Ghee, Saffron, Almonds, Pistachios" },
  { name: "શ્રીખંડ (Shrikhand)", ingredients: "Yogurt, Sugar, Saffron, Cardamom, Almonds" },
  { name: "દહીં વડા (Dahi Vada)", ingredients: "Urad dal, Yogurt, Sugar, Saffron, Cardamom" },
  { name: "બેસન લાડુ (Besan Ladoo)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Almonds" },
  { name: "કાજુ કતલી (Kaju Katli)", ingredients: "Cashews, Sugar, Ghee, Saffron, Cardamom" },
  { name: "બદામ બરફી (Badam Barfi)", ingredients: "Almonds, Sugar, Ghee, Saffron, Cardamom" },
  { name: "પિસ્તા બરફી (Pista Barfi)", ingredients: "Pistachios, Sugar, Ghee, Saffron, Cardamom" },
  { name: "કોકોનટ બરફી (Coconut Barfi)", ingredients: "Coconut, Sugar, Ghee, Saffron, Cardamom" },
  { name: "ગાજર હલવા (Gajar Halwa)", ingredients: "Carrot, Milk, Sugar, Ghee, Saffron, Almonds" },
  { name: "સૂજી હલવા (Suji Halwa)", ingredients: "Semolina, Ghee, Sugar, Saffron, Almonds" },
  { name: "દાલ હલવા (Dal Halwa)", ingredients: "Lentils, Ghee, Sugar, Saffron, Almonds" },
  { name: "બેસન હલવા (Besan Halwa)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Almonds" },
  { name: "ખીર (Kheer)", ingredients: "Milk, Rice, Sugar, Saffron, Cardamom, Almonds" },
  { name: "રાબડી (Rabdi)", ingredients: "Milk, Sugar, Saffron, Cardamom, Almonds" },
  { name: "ફિરની (Firni)", ingredients: "Milk, Rice flour, Sugar, Saffron, Cardamom" },
  { name: "શાહી ટુકડા (Shahi Tukda)", ingredients: "Bread, Milk, Sugar, Saffron, Almonds, Pistachios" },
  { name: "બેસન ચીલા (Besan Chila)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Cardamom" },
  { name: "બેસન ગુજરી (Besan Gujri)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Almonds" },
  { name: "બેસન શિકરંજી (Besan Shikranjhi)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Cardamom" },
  { name: "બેસન ગોટા (Besan Gota)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Almonds" },
  { name: "બેસન ચૂરમા (Besan Churma)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Cardamom" },
  { name: "બેસન લાપસી (Besan Lapsi)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Almonds" },
  { name: "બેસન ખીર (Besan Kheer)", ingredients: "Gram flour, Milk, Sugar, Saffron, Cardamom" },
  { name: "બેસન રાબડી (Besan Rabdi)", ingredients: "Gram flour, Milk, Sugar, Saffron, Almonds" },
  { name: "બેસન ફિરની (Besan Firni)", ingredients: "Gram flour, Milk, Sugar, Saffron, Cardamom" },
  { name: "બેસન શાહી ટુકડા (Besan Shahi Tukda)", ingredients: "Gram flour, Bread, Milk, Sugar, Saffron" },
  { name: "બેસન ગુલાબ જામુન (Besan Gulab Jamun)", ingredients: "Gram flour, Khoya, Sugar, Ghee, Saffron" },
  { name: "બેસન રસગુલ્લા (Besan Rasgulla)", ingredients: "Gram flour, Chhena, Sugar, Saffron, Cardamom" },
  { name: "બેસન બરફી (Besan Barfi)", ingredients: "Gram flour, Khoya, Sugar, Ghee, Saffron" },
  { name: "બેસન પેડા (Besan Peda)", ingredients: "Gram flour, Khoya, Sugar, Ghee, Saffron" },
  { name: "બેસન લાડુ (Besan Ladoo)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Almonds" },
  { name: "બેસન શ્રીખંડ (Besan Shrikhand)", ingredients: "Gram flour, Yogurt, Sugar, Saffron, Cardamom" },
  { name: "બેસન દહીં વડા (Besan Dahi Vada)", ingredients: "Gram flour, Yogurt, Sugar, Saffron, Cardamom" },
  { name: "બેસન કાજુ કતલી (Besan Kaju Katli)", ingredients: "Gram flour, Cashews, Sugar, Ghee, Saffron" },
  { name: "બેસન બદામ બરફી (Besan Badam Barfi)", ingredients: "Gram flour, Almonds, Sugar, Ghee, Saffron" },
  { name: "બેસન પિસ્તા બરફી (Besan Pista Barfi)", ingredients: "Gram flour, Pistachios, Sugar, Ghee, Saffron" },
  { name: "બેસન કોકોનટ બરફી (Besan Coconut Barfi)", ingredients: "Gram flour, Coconut, Sugar, Ghee, Saffron" },
  { name: "બેસન ગાજર હલવા (Besan Gajar Halwa)", ingredients: "Gram flour, Carrot, Milk, Sugar, Ghee, Saffron" },
  { name: "બેસન સૂજી હલવા (Besan Suji Halwa)", ingredients: "Gram flour, Semolina, Ghee, Sugar, Saffron" },
  { name: "બેસન દાલ હલવા (Besan Dal Halwa)", ingredients: "Gram flour, Lentils, Ghee, Sugar, Saffron" },
  { name: "બેસન ખીર (Besan Kheer)", ingredients: "Gram flour, Milk, Rice, Sugar, Saffron, Cardamom" },
  { name: "બેસન રાબડી (Besan Rabdi)", ingredients: "Gram flour, Milk, Sugar, Saffron, Almonds" },
  { name: "બેસન ફિરની (Besan Firni)", ingredients: "Gram flour, Milk, Sugar, Saffron, Cardamom" },
  { name: "બેસન શાહી ટુકડા (Besan Shahi Tukda)", ingredients: "Gram flour, Bread, Milk, Sugar, Saffron, Almonds" },
  { name: "બેસન ગુલાબ જામુન (Besan Gulab Jamun)", ingredients: "Gram flour, Khoya, Sugar, Ghee, Saffron, Cardamom" },
  { name: "બેસન રસગુલ્લા (Besan Rasgulla)", ingredients: "Gram flour, Chhena, Sugar, Saffron, Cardamom, Almonds" },
  { name: "બેસન બરફી (Besan Barfi)", ingredients: "Gram flour, Khoya, Sugar, Ghee, Saffron, Almonds" },
  { name: "બેસન પેડા (Besan Peda)", ingredients: "Gram flour, Khoya, Sugar, Ghee, Saffron, Almonds" },
  { name: "બેસન લાડુ (Besan Ladoo)", ingredients: "Gram flour, Ghee, Sugar, Saffron, Almonds, Pistachios" },
  { name: "બેસન શ્રીખંડ (Besan Shrikhand)", ingredients: "Gram flour, Yogurt, Sugar, Saffron, Cardamom, Almonds" },
  { name: "બેસન દહીં વડા (Besan Dahi Vada)", ingredients: "Gram flour, Yogurt, Sugar, Saffron, Cardamom, Almonds" },
  { name: "ફાફડા (Fafda)", ingredients: "Gram flour, Carom seeds, Salt, Oil, Turmeric" },
  { name: "ગાંઠિયા (Gathiya)", ingredients: "Gram flour, Carom seeds, Black pepper, Oil, Salt" },
  { name: "સેવ (Sev)", ingredients: "Gram flour, Turmeric, Red chili powder, Oil, Salt" },
  { name: "ભુજીયા (Bhujia)", ingredients: "Gram flour, Moth beans flour, Spices, Oil, Salt" },
  { name: "ખમણ (Khaman)", ingredients: "Gram flour, Yogurt, Lemon juice, Sugar, Green chili, Mustard seeds" },
  { name: "ઢોકળા (Dhokla)", ingredients: "Rice flour, Gram flour, Yogurt, Lemon juice, Mustard seeds" },
  { name: "પત્રા (Patra)", ingredients: "Colocasia leaves, Gram flour, Tamarind, Jaggery, Spices" },
  { name: "હેન્ડવો (Handvo)", ingredients: "Rice, Gram dal, Yogurt, Vegetables, Sesame seeds, Spices" },
  { name: "દાળ વડા (Dal Vada)", ingredients: "Chana dal, Green chili, Ginger, Coriander, Oil, Salt" },
  { name: "કચોરી (Kachori)", ingredients: "Refined flour, Moong dal, Spices, Oil, Salt" },
  { name: "સમોસા (Samosa)", ingredients: "Refined flour, Potato, Green peas, Spices, Oil" },
  { name: "ચકલી (Chakli)", ingredients: "Rice flour, Gram flour, Sesame seeds, Cumin, Oil" },
  { name: "પાપડી (Papdi)", ingredients: "Refined flour, Semolina, Carom seeds, Oil, Salt" },
  { name: "પુરી (Puri)", ingredients: "Wheat flour, Semolina, Oil, Salt" },
  { name: "મઠિયા (Mathiya)", ingredients: "Gram flour, Wheat flour, Carom seeds, Fenugreek, Oil" },
  { name: "ખાખરા (Khakhra)", ingredients: "Wheat flour, Fenugreek leaves, Spices, Oil, Salt" },
  { name: "મૂઠિયા (Muthiya)", ingredients: "Wheat flour, Bottle gourd, Fenugreek, Spices, Oil" },
  { name: "બટાકા વેફર (Batata Wafer)", ingredients: "Potato, Salt, Oil" },
  { name: "ચીવડા (Chivda)", ingredients: "Flattened rice, Peanuts, Curry leaves, Spices, Oil" },
  { name: "સેવ ખમણી (Sev Khamani)", ingredients: "Gram flour, Yogurt, Sev, Garlic, Green chili" },
  { name: "લિલવા કચોરી (Lilva Kachori)", ingredients: "Refined flour, Green pigeon peas, Ginger, Spices, Oil" },
  { name: "ઠેપલા (Thepla)", ingredients: "Wheat flour, Fenugreek leaves, Yogurt, Spices, Oil" },
  { name: "મસાલા પૂરી (Masala Puri)", ingredients: "Wheat flour, Carom seeds, Black pepper, Oil, Salt" },
  { name: "ખાંડવી (Khandvi)", ingredients: "Gram flour, Yogurt, Green chili, Mustard seeds, Oil" },
  { name: "દાળ પકોડા (Dal Pakoda)", ingredients: "Moong dal, Green chili, Onion, Spices, Oil" },
  { name: "ભજીયા (Bhajiya)", ingredients: "Gram flour, Potato/Onion/Chili, Salt, Oil, Spices" },
  { name: "સમોસા પટી (Samosa Patti)", ingredients: "Refined flour, Oil, Salt" },
  { name: "ફરસી પુરિ (Farsi Puri)", ingredients: "Refined flour, Semolina, Black pepper, Oil, Salt" },
  { name: "મસાલા ખાખરા (Masala Khakhra)", ingredients: "Wheat flour, Chili powder, Cumin, Oil, Salt" },
  { name: "નાયલોન સેવ (Nylon Sev)", ingredients: "Gram flour, Turmeric, Oil, Salt" }
];


     // Get all form elements
     const sizeSelector = document.getElementById("sizeSelector");
     const nameInput = document.getElementById("nameInput");
     const ingredientsInput = document.getElementById("ingredientsInput");
     const allergenInput = document.getElementById("allergenInput");
     const weightInput = document.getElementById("weightInput");
     const priceInput = document.getElementById("priceInput");
     const daysInput = document.getElementById("daysInput");

         // Get all display elements
     const label = document.getElementById("label");
     const product = document.getElementById("product");
     const ingredients = document.getElementById("ingredients");
     const allergen = document.getElementById("allergen");
     const weightDisplay = document.getElementById("weightDisplay");
     const priceDisplay = document.getElementById("priceDisplay");
     const bestBeforeDisplay = document.getElementById("bestBeforeDisplay");
     const address = document.getElementById("address");
     
     // Get search elements
     const searchInput = document.getElementById("searchInput");
     const searchResults = document.getElementById("searchResults");



     // Set default days to 5
     daysInput.value = 5;
     
     // Search functionality
     searchInput.addEventListener("input", () => {
       const query = searchInput.value.toLowerCase();
       if (query.length < 2) {
         searchResults.style.display = "none";
         return;
       }
       
       const filteredSweets = gujaratiSweets.filter(sweet => 
         sweet.name.toLowerCase().includes(query) || 
         sweet.ingredients.toLowerCase().includes(query)
       );
       
       displaySearchResults(filteredSweets);
     });
     
     function displaySearchResults(results) {
       if (results.length === 0) {
         searchResults.style.display = "none";
         return;
       }
       
       searchResults.innerHTML = results.map(sweet => `
         <div class="search-result-item" onclick="selectSweet('${sweet.name}', '${sweet.ingredients}')">
           <div class="sweet-name">${sweet.name}</div>
           <div class="sweet-ingredients">${sweet.ingredients}</div>
         </div>
       `).join("");
       
       searchResults.style.display = "block";
     }
     
           // UK Allergens list for automatic bold formatting
      const ukAllergens = [
        'nuts', 'almonds', 'cashews', 'pistachios', 'walnuts', 'hazelnuts', 'brazil nuts', 'pecans', 'macadamia',
        'sesame', 'sesame seeds', 'tahini', 'sesame oil',
        'soya', 'soy', 'soybean', 'soy flour', 'soy protein', 'tofu', 'edamame',
        'dairy', 'milk', 'cream', 'butter', 'cheese', 'yogurt', 'yoghurt', 'whey', 'casein', 'lactose',
        'mustard', 'mustard seeds', 'mustard powder', 'mustard oil',
        'cereals', 'wheat', 'barley', 'rye', 'oats', 'gluten', 'flour', 'bread', 'pasta',
        'sulphites', 'sulphur dioxide', 'sodium sulphite', 'potassium sulphite',
        'peanuts', 'groundnuts', 'monkey nuts',
        'celery', 'celery seeds', 'celery salt'
      ];

      function formatIngredientsWithBold(ingredients) {
        let formattedIngredients = ingredients;
        
        // Split ingredients by commas and process each one
        const ingredientList = ingredients.split(',').map(ingredient => {
          ingredient = ingredient.trim();
          
          // Check if this ingredient contains any UK allergens
          const hasAllergen = ukAllergens.some(allergen => 
            ingredient.toLowerCase().includes(allergen.toLowerCase())
          );
          
          // If it contains an allergen, wrap in bold tags
          if (hasAllergen) {
            return `<b>${ingredient}</b>`;
          }
          
          return ingredient;
        });
        
        return ingredientList.join(', ');
      }

      function selectSweet(name, ingredients) {
        // Extract English name from Gujarati name
        const englishName = name.match(/\(([^)]+)\)/)?.[1] || name;
        
        // Format ingredients with automatic bold for allergens
        const formattedIngredients = formatIngredientsWithBold(ingredients);
        
        // Update form inputs
        nameInput.value = englishName;
        ingredientsInput.value = formattedIngredients;
        
        // Update label display immediately
        product.textContent = englishName;
        ingredients.innerHTML = formattedIngredients;
        
        // Force update the allergen display as well
        allergen.innerHTML = allergenInput.value;
        
        // Hide search results
        searchResults.style.display = "none";
        searchInput.value = "";
        
        // Focus on weight input for quick entry
        weightInput.focus();
        
        // Trigger input events to ensure all displays update
        nameInput.dispatchEvent(new Event('input'));
        ingredientsInput.dispatchEvent(new Event('input'));
      }
     
     // Hide search results when clicking outside
     document.addEventListener("click", (e) => {
       if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
         searchResults.style.display = "none";
       }
     });

     // Size selector functionality
     sizeSelector.addEventListener("change", () => {
       const size = sizeSelector.value;
       label.className = `label size-${size}`;
     });

    // Weight input
    weightInput.addEventListener("input", () => {
      const weight = weightInput.value.trim();
      if (weight) {
        weightDisplay.textContent = `Weight: ${weight}`;
      } else {
        weightDisplay.textContent = '';
      }
    });
    
    // Price input
    priceInput.addEventListener("input", () => {
      const price = priceInput.value.trim();
      if (price) {
        priceDisplay.textContent = `Price: £${price}`;
      } else {
        priceDisplay.textContent = '';
      }
    });

         // Best before date - Calculate from days
     daysInput.addEventListener("input", () => {
       const days = parseInt(daysInput.value);
       if (days && days > 0) {
         const expiryDate = new Date();
         expiryDate.setDate(expiryDate.getDate() + days);
         const formattedDate = expiryDate.toLocaleDateString('en-GB');
         bestBeforeDisplay.textContent = `Best Before: ${formattedDate}`;
       } else {
         bestBeforeDisplay.textContent = '';
       }
     });

    

                   // Other inputs
      nameInput.addEventListener("input", () => product.textContent = nameInput.value);
      ingredientsInput.addEventListener("input", () => {
        // Auto-format ingredients with bold for allergens
        const formattedIngredients = formatIngredientsWithBold(ingredientsInput.value);
        ingredients.innerHTML = formattedIngredients;
      });
      allergenInput.addEventListener("input", () => allergen.innerHTML = allergenInput.value);

         // Generate and print function
     function generateAndPrint() {
       window.print();
     }

                   // Initialize displays
      daysInput.dispatchEvent(new Event('input'));
  </script>
</body>
</html>
